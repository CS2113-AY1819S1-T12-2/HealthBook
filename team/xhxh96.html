<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.6.1"><title>Cheng Xianhao - Project Portfolio</title><link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css"></head><body class="article"><div id="seedu-header"><nav class="navbar navbar-lg navbar-light bg-lighter"><div class="container"><a class="navbar-brand" href="https://se-edu.github.io/"><img src="../images/SeEduLogo.png" alt="SE-EDU"></a><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="https://se-edu.github.io/addressbook-level1">AB-1</a></li><li class="nav-item"><a class="nav-link" href="https://se-edu.github.io/addressbook-level2">AB-2</a></li><li class="nav-item"><a class="nav-link" href="https://se-edu.github.io/addressbook-level3">AB-3</a></li><li class="nav-item"><a class="nav-link active" href="../index.html">AB-4</a></li><li class="nav-item"><a class="nav-link" href="https://se-edu.github.io/collate">Collate</a></li><li class="nav-item"><a class="nav-link" href="https://se-edu.github.io/se-book">Book</a></li><li class="nav-item"><a class="nav-link" href="https://se-edu.github.io/learningresources">Resources</a></li></ul></div></nav></div><div id="site-header"><nav class="navbar navbar-light bg-light"><div class="container"><a class="navbar-brand" href="../index.html">Health Book</a><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="../UserGuide.html">User Guide</a></li><li class="nav-item"><a class="nav-link" href="../DeveloperGuide.html">Developer Guide</a></li><li class="nav-item"><a class="nav-link active" href="../AboutUs.html">About Us</a></li><li class="nav-item"><a class="nav-link" href="../ContactUs.html">Contact Us</a></li><li class="navitem"><a class="nav-link" href="https://github.com/CS2113-AY1819S1-T12-2/main"><span class="fa fa-github fa-lg" aria-hidden="true"></span>&nbsp;View on GitHub</a></li></ul></div></nav></div><div id="header"><h1>Cheng Xianhao - Project Portfolio</h1><div id="toc" class="toc"><div id="toctitle"></div><ul class="sectlevel1">
<li><a href="#project-health-book">1. PROJECT: Health Book</a></li>
<li><a href="#overview">2. Overview</a></li>
<li><a href="#summary-of-contributions">3. Summary of contributions</a></li>
<li><a href="#contributions-to-the-user-guide">4. Contributions to the User Guide</a>
<ul class="sectlevel2">
<li><a href="#adding-additional-information-of-patient-code-addinfo-code">4.1. Adding Additional Information of Patient: <code>addinfo</code></a></li>
<li><a href="#encrypting-patient-data-code-encrypt-code">4.2. Encrypting Patient Data: <code>encrypt</code></a></li>
</ul>
</li>
<li><a href="#contributions-to-the-developer-guide">5. Contributions to the Developer Guide</a>
<ul class="sectlevel2">
<li><a href="#additional-information-feature">5.1. Additional Information feature</a></li>
<li><a href="#data-encryption">5.2. Data Encryption</a></li>
<li><a href="#use-case-adding-additional-information-of-patient-code-addinfo-code">5.3. Use case: Adding additional information of patient: <code>addinfo</code></a></li>
<li><a href="#use-case-data-encryption-code-encrypt-code">5.4. Use case: Data Encryption: <code>encrypt</code></a></li>
</ul>
</li>
</ul></div></div><div id="content"><div class="sect1">
<h2 id="project-health-book"><a class="link" href="#project-health-book">1. PROJECT: Health Book</a></h2>
<div class="sectionbody">
<hr>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="link" href="#overview">2. Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Health Book is a desktop address book application targeted at health care professionals who seek to retrieve their patients' personal details and health-related information all in one place.
The application provides both a Command Line Interface (CLI) for input of data and a Graphical User Interface (GUI) for displaying of output (patient&#8217;s personal details and health-related information).
The application is fully written in Java, allowing cross-platform compatibility.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary-of-contributions"><a class="link" href="#summary-of-contributions">3. Summary of contributions</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Major enhancement</strong>: Added <strong>the ability to add/edit additional information</strong>.</p>
<div class="ulist">
<ul>
<li>
<p>What it does: Allows users to selectively add or edit additional information of patients that are not required for the creation of a patient profile in Health Book.</p>
</li>
<li>
<p>Justification: Based on the team&#8217;s interview with health care professionals, the team understood that some of the information that health care professionals are interested about their patients include bio-data like NRIC, gender, blood type, occupation, height and weight which might not be available upon the creation of the patient&#8217;s profile. Giving the user the ability to add or edit such information after the creation of patient profile provides user with more flexibility on managing such information.</p>
</li>
<li>
<p>Highlights: To ensure that users input the correct type of data for the correct type of information, a dual-layer check system is implemented for most fields - the first layer is done by using Java Regular Expressions, while the second layer is done using checksum algorithms and exception handling. The different types of information to be added means that an iterative approach has to be taken. However, this would also mean that care needs to be taken to ensure that there are no regression.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Minor enhancement</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Presented the additional information in a table view format in the main window.</p>
<div class="ulist">
<ul>
<li>
<p>Justification: Health care professionals interact with such information frequently. A table view format is best able to present these information in a systematic manner.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Toggleable encryption with AES 128-bit symmetric encryption</p>
<div class="ulist">
<ul>
<li>
<p>Justification: As the application is targeted at the health care industry where privacy is of major concern, encryption is the solution to ensure that the application remains socially responsible. However, to handle the project constraint of "human-editable-file", the encryption functionality is a toggled feature so that user can choose to disable encryption should they require the human-editable saved data.</p>
</li>
<li>
<p>Credits: <a href="http://santuario.apache.org/">Apache Santuario</a>'s encryption library is used for this feature.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Code contributed</strong>: <a href="https://nuscs2113-ay1819s1.github.io/dashboard/#=undefined&amp;search=xhxh96">CodeDashboard</a></p>
</li>
<li>
<p><strong>Other contributions</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Role of Domain Expert:</p>
<div class="ulist">
<ul>
<li>
<p>In-charged of gathering user requirements</p>
</li>
<li>
<p>In-charged of managing version control system workflow</p>
</li>
</ul>
</div>
</li>
<li>
<p>Project management:</p>
<div class="ulist">
<ul>
<li>
<p>Managed the use of issue tracker and kanban board.</p>
</li>
<li>
<p>Managed the use of Continuous Integration tools.</p>
</li>
<li>
<p>Designed the workflow for using of GitHub</p>
</li>
</ul>
</div>
</li>
<li>
<p>Enhancements to existing features:</p>
<div class="ulist">
<ul>
<li>
<p>Increased code coverage from 78% to 82% (Pull requests <a href="https://github.com/CS2113-AY1819S1-T12-2/main/pull/213">#213</a>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Tools:</p>
<div class="ulist">
<ul>
<li>
<p>Integrated AppVeyor and Coverall.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Community:</p>
<div class="ulist">
<ul>
<li>
<p>PRs review with non-trivial comments:</p>
</li>
<li>
<p>Reported bugs and suggestions for other teams in class(Issue <a href="https://github.com/CS2113-AY1819S1-T16-2/main/issues/103">#103</a>, <a href="https://github.com/CS2113-AY1819S1-T16-2/main/issues/93">#93</a>, <a href="https://github.com/CS2113-AY1819S1-T16-2/main/issues/98">#98</a>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-user-guide"><a class="link" href="#contributions-to-the-user-guide">4. Contributions to the User Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the User Guide. They showcase my ability to write documentation targeting end-users.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="adding-additional-information-of-patient-code-addinfo-code"><a class="link" href="#adding-additional-information-of-patient-code-addinfo-code">4.1. Adding Additional Information of Patient: <code>addinfo</code></a></h3>
<div class="paragraph">
<p>Add/Edit the following additional information: NRIC, Date Of Birth (in DD-MMY-YYY format), height (cm), weight (kg),
gender, occupation, and marital status.<br></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>age</code> field will be auto-calculated once Date Of Birth is populated. It will be displayed on the UI in parenthesis under Date of Birth field.+
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Format: <code>addinfo INDEX [i/NRIC] [d/DOB] [h/HEIGHT] [w/WEIGHT] [g/GENDER] [b/BLOOD TYPE] [o/OCCUPATION] [m/MARITAL_STATUS]</code></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<div class="title">Constraints for <code>[i/NRIC]</code>:</div>
<ul>
<li>
<p>Must start with 'S' or 'T' followed by 7 digits before ending with an alphabet</p>
</li>
<li>
<p>NRIC input must comply to ICA&#8217;s NRIC checksum algorithm</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Constraints for <code>[d/DOB]</code>:</div>
<ul>
<li>
<p>Must be in the format <code>dd-MM-YYYY</code></p>
</li>
<li>
<p>Must not be before 01-01-1900.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Constraints for `[h/HEIGHT]</div>
<ul>
<li>
<p>Must be a numerical input.</p>
</li>
<li>
<p>Floating point numbers are accepted.</p>
</li>
<li>
<p>Input all <code>height</code> data in centimeters.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Constraints for `[w/WEIGHT]</div>
<ul>
<li>
<p>Must be a numerical input.</p>
</li>
<li>
<p>Floating point numbers are accepted.</p>
</li>
<li>
<p>Input all <code>weight</code> data in kilograms.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Constraints for <code>[b/BLOOD TYPE]</code></div>
<ul>
<li>
<p>Input must either be <code>A+</code>, <code>A-</code>, <code>AB+</code>, <code>AB-</code>, <code>B+</code>, <code>B-</code>, <code>O+</code> or <code>O-</code>.</p>
</li>
<li>
<p>Excluding the <code>+</code>/<code>-</code> from the input will not be accepted.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Constraints for <code>[g/GENDER]</code></div>
<ul>
<li>
<p>Input must either be <code>M</code> (for Male) or <code>F</code> (for Female).</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Constraints for <code>[o/OCCUPATION]</code></div>
<ul>
<li>
<p>Must not contain any numeric and special characters including whitespaces (Eg. Nurse and Doctor or Wood-Logger are not accepted input).</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Constraints for <code>[m/MARITAL_STATUS]</code></div>
<ul>
<li>
<p>Must be either <code>M</code> for Married, <code>S</code> for Single or <code>D</code> for Divorced.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>addinfo</code> command not only adds, but also edits the additional information of each patient by overwriting existing information. For instance, if a patient already has the <code>NRIC</code> data, running <code>addinfo [PATIENT_INDEX] i/S9696531A</code> will overwrite the existing <code>NRIC</code> data with <code>S9696531A</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>addinfo 2 i/S9696531A d/01-01-1990 h/154 g/M</code><br>
For patient at index 2, populate NRIC field with S91234567A, date of birth field
with 01-01-1990, height field with 154, gender field with Male.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="encrypting-patient-data-code-encrypt-code"><a class="link" href="#encrypting-patient-data-code-encrypt-code">4.2. Encrypting Patient Data: <code>encrypt</code></a></h3>
<div class="paragraph">
<p>Toggles on and off the encryption feature for the saved data file.</p>
</div>
<div class="paragraph">
<p>Toggling on the feature will cause the saved data file to be encrypted using AES 128-bit standard. Saved file will be named as <code>healthbook_encrypted.xml</code>.</p>
</div>
<div class="paragraph">
<p>Toggling off the feature will cause the saved data file to be saved in plain-text <code>.xml</code> file. Saved file will be named as <code>healthbook.xml</code>.</p>
</div>
<div class="paragraph">
<p>Format: <code>encrypt</code></p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
If you have toggled on encryption, it is important that you keep the <code>key</code> file secure. Losing the <code>key</code> file will cause the permanent loss of the saved data. Also, unauthorized personnel with access to the <code>key</code> file will have access to the saved data.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>encrypt</code><br>
Depending on the current setting of encryption, this will toggle on or off the encryption. Refer message box to understand if encryption has been toggled on or off.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/encryption.png" alt="encryption" width="800">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-developer-guide"><a class="link" href="#contributions-to-the-developer-guide">5. Contributions to the Developer Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the Developer Guide. They showcase my ability to write technical documentation and the technical depth of my contributions to the project.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="additional-information-feature"><a class="link" href="#additional-information-feature">5.1. Additional Information feature</a></h3>
<div class="sect3">
<h4 id="current-implementation"><a class="link" href="#current-implementation">5.1.1. Current Implementation</a></h4>
<div class="paragraph">
<p>The <code>addinfo</code> command is facilitated by the <code>LogicManager</code> which calls upon <code>AddressBookParser</code> for the execution of commands. It extends the <code>AddressBookParser</code> with the <code>addinfo</code> command.</p>
</div>
<div class="paragraph">
<p>The command takes in an <code>index</code> which represents the <code>Person</code> in the list displayed in the <code>PersonCardList</code> view. This is followed by a pre-defined list of arguments that user can input to tell the program which attribute of the person will be added/edited using the <code>AddInfoCommandParser</code> (For eg. the argument <code>g/</code> tells the command that the <code>Gender</code> attribute of the <code>Person</code> at <code>index</code> will be edited).</p>
</div>
<div class="paragraph">
<p>The command then looks for the <code>String</code> after the arguments which represents the data to be added. This data will be checked for validity using the <code>ParserUtil</code> class. If the data is valid, the respective class will be initialized (For eg. the commmand <code>g/M</code> is valid as it stands for changing the <code>Gender</code> of <code>Person</code> to <code>Male</code>. Since the data <code>M</code> is valid, the <code>Gender</code> class will be initialized). If the data is not valid however, an <code>ParseException</code> will be thrown warning users that the input data is not valid.</p>
</div>
<div class="paragraph">
<p>Upon handling all the arguments, an <code>addInfoPersonDescriptor</code> object will be created. This is essentially a facade object that contains all the attributes of the <code>Person</code> to be edited, with its updated attributes. There will then be a mapping of the <code>addInfoPersonDescriptor</code> to a new <code>Person</code> object facilitated by the method <code>AddInfoCommand#createEditedPerson</code>.</p>
</div>
<div class="paragraph">
<p>Finally, the <code>Model#updatePerson</code> "copies" attribute of the new <code>Person</code> object created above to the <code>Person</code> to be edited by calling the <code>VersionedAddressBook#updatePerson</code> which sets the new <code>Person</code> object to the <code>Person</code> to be edited using <code>UniquePersonList#SetPerson</code>.</p>
</div>
<div class="paragraph">
<p>Given below is an example usage scenario and how the <code>addinfo</code> command works at each step.</p>
</div>
<div class="paragraph">
<p>Step 1. User executes <code>addinfo 5 ic/S1234567Z g/M d/01-01-1970</code> to modify the <code>Nric</code>, <code>Gender</code>, and <code>DateOfBirth</code> attributes of the 5th person in the <code>PersonCardList</code> view.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If any of the arguments contain invalid data, the program will not process any data. For instance, <code>addinfo 1 i/S1234567Z d/20-20-19872 g/M</code> will not change the <code>Nric</code> attribute of the <code>Person</code> at index 1 as the date of birth argument contains erroneous date.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Step 2. The <code>AddressBookParser</code> makes a call to <code>AddInfoCommandParser</code> together with the <code>String</code> input.</p>
</div>
<div class="paragraph">
<p>Step 3. The <code>AddInfoCommandParser</code> then looks out for the pre-determined set of arguments in the <code>String</code> input. If any of the arguments are found, a call will be made to the <code>ParserUtil</code> class which extracts the data meant for the particular argument.</p>
</div>
<div class="paragraph">
<p>Step 4. The <code>ParserUtil</code> class then checks for the validity of the data being parsed. If the data is valid, the class for that data will be initialized and added into an <code>AddInfoPersonDescriptor</code> object. If the data is not valid, a <code>ParseException</code> will be thrown, which will be handled by the <code>UIManager</code> requesting user the correct the data.</p>
</div>
<div class="paragraph">
<p>Step 5. A <code>Person</code> object will be retrieved from the <code>lastShownList</code> at the appropriate index. The retrieved <code>Person</code> object will then retrieve the updated information from the <code>AddInfoPersonDescriptor</code> object created previously.</p>
</div>
<div class="paragraph">
<p>Step 6. The <code>Person</code> will now have an updated additional information.</p>
</div>
<div class="paragraph">
<p>The following sequence diagram summarizes what happens when an user executes a new command:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/AddInfoCommandSD.png" alt="AddInfoCommandSD" width="1000">
</div>
<div class="title">Figure 1. Sequence Diagram for <code>addinfo</code> command. A full resolution of the diagram is available <a href="https://cs2113-ay1819s1-t12-2.github.io/main/images/AddInfoCommandSD.png">here</a>.</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="data-encryption"><a class="link" href="#data-encryption">5.2. Data Encryption</a></h3>
<div class="sect3">
<h4 id="current-implementation-2"><a class="link" href="#current-implementation-2">5.2.1. Current Implementation</a></h4>
<div class="paragraph">
<p>The encryption library used is <a href="http://santuario.apache.org/">Apache Santuario</a>. It extends the existing <code>XmlUtil</code> with methods that encrypt and decrypt <code>.xml</code> files.</p>
</div>
<div class="paragraph">
<p>Using AES 128-bit symmetric encryption, the encryption mechanism is facilitated by <code>XmlUtil</code>, <code>SecurityKey</code> and the file <code>preferences.json</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
While the file <code>preferences.json</code> file is not used during the actual encryption process, the file is used to initialize the attributes of <code>UserPrefs</code> object which determines the encryption process.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Upon running the program, <code>MainApp#initSecretKey</code> checks if encryption has been enabled using value of the attribute <code>encryption</code> in <code>UserPrefs</code> object. If it is <code>true</code>, encryption is enabled and the method then checks if <code>key</code> file exist. The method will attempt to read the <code>key</code> file using <code>SecretKeyUtil#ReadSecretKey</code> and save the key into a <code>SecretKey</code> object should there be an existing <code>key</code> file.</p>
</div>
<div class="paragraph">
<p>However, if encryption is not enabled, or should there be an error reading the <code>key</code> file, or that the <code>key</code> file does not exist, <code>MainApp#initSecretKey</code> will then proceed to generate a new <code>SecretKey</code> object using <code>SecretKetUtil#getSecretKey</code>.</p>
</div>
<div class="paragraph">
<p>Next, <code>MainApp#initModelManager</code> will be executed. This method will also check if encryption has been enabled using <code>preferences.json</code> file. If encryption is enabled, it will attempt to look for <code>healthbook_encrypted.xml</code> file. If <code>healthbook_encrypted.xml</code> file exist, the same method will first load the <code>.xml</code> file using <code>XmlUtil#loadEncryptedXmlFile</code>, before attempting to decrypt the encrypted <code>.xml</code> file using the <code>key</code> file with the method <code>XmlUtil#decryptDocument</code>. A temporary <code>healthbook.xml</code> will be generated to be consumed by the program.</p>
</div>
<div class="paragraph">
<p>However, if <code>healthbook_encrypted.xml</code> does not exist, <code>MainApp#initModeManager</code> assumes that user runs the program for the first time, and proceed to load in sample data. If the <code>healthbook_encrypted.xml</code> does exist, but could not be decrypted successfully, Health Book will be launched without any patient data. An error pertaining to the failure to decrypt the <code>.xml</code> file will also be logged.</p>
</div>
<div class="paragraph">
<p>Upon exiting the program, <code>MainApp#stop</code> checks if the encryption has been enabled. If the encryption has been enabled, it will call <code>XmlUtil#loadDecryptedXmlFile</code> which loads the temporary <code>healthbook.xml</code> file before encrypting the temporary <code>healthbook.xml</code> file with <code>XmlUtil#encryptDocument</code> method. It will then proceed to destroy the temporary <code>healthbook.xml</code> file and generate a <code>key</code> file based on the <code>SecretKey</code> that was generated when the application launched.</p>
</div>
<div class="paragraph">
<p>When users execute the <code>encrypt</code> command, the <code>AddressBookParser</code> returns <code>EncryptCommand</code> object to the <code>LogicManager</code>, which in turn executes the <code>EncryptCommand#execute</code> method. This method in turn gets the <code>UserPref</code> via <code>Model#getUserPref</code> and executes the <code>toggleEncryption</code> method, which in turn sets the <code>encryption</code> attribute in <code>UserPref</code> to either <code>true</code> or <code>false</code>, thereby enabling or disabling encryption.</p>
</div>
<div class="paragraph">
<p>The following sequence diagram shows how the encryption works when the application is launched:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/EncryptCommandSD.png" alt="EncryptCommandSD" width="800">
</div>
<div class="title">Figure 2. Sequence diagram for Encryption. A full resolution of the diagram is available <a href="https://cs2113-ay1819s1-t12-2.github.io/main/images/EncryptCommandSD.png">here</a>.</div>
</div>
<div class="paragraph">
<p>Given below is an example usage scenario on how <code>encrypt</code> works at each step:</p>
</div>
<div class="paragraph">
<p>Step 1. A doctor launches the application for the the first time (by default encryption is disabled). A <code>SecretKey</code> is generated.</p>
</div>
<div class="paragraph">
<p>Step 2. The doctor added in some new patient data.</p>
</div>
<div class="paragraph">
<p>Step 3. The doctor executes <code>encrypt</code>.</p>
</div>
<div class="paragraph">
<p>Step 4. The doctor exits the program.</p>
</div>
<div class="paragraph">
<p>Step 5. Before the application fully exits, the <code>MainApp#stop</code> method asserts that encryption has been enabled. A temporary <code>healthbook.xml</code> file is generated. The same method will call <code>XmlUtil#loadDecryptedXmlFile</code> to load the temporary <code>healthbook.xml</code> before calling <code>XmlUtil#encryptDocument</code> to encrypt the file data. A <code>key</code> file is generated containing the <code>SecretKey</code> used for the encryption.</p>
</div>
<div class="paragraph">
<p>Step 6. <code>MainApp#stop</code> then deletes the temporary <code>healthbook.xml</code> file before fully exiting the application.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="use-case-adding-additional-information-of-patient-code-addinfo-code"><a class="link" href="#use-case-adding-additional-information-of-patient-code-addinfo-code">5.3. Use case: Adding additional information of patient: <code>addinfo</code></a></h3>
<div class="paragraph">
<p>Assume that user has already requested the System to display a list of patients.</p>
</div>
<div class="paragraph">
<p><strong>MSS</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>User requests to add optional information for patient.</p>
</li>
<li>
<p>System adds optional information for the patient and displays a message that entry for optional information is successful.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Extensions</strong></p>
</div>
<div class="ulist none">
<ul class="none">
<li>
<p>1a. User uses the wrong format to add optional information i.e. wrong command or invalid data for the fields.</p>
<div class="ulist none">
<ul class="none">
<li>
<p>1a1. System shows error message that format is wrong and gives user an example on the correct format of adding optional information. System will ignore invalid commands or data and process only the valid commands and data.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="ulist none">
<ul class="none">
<li>
<p>1b. User provides an invalid index for the list.</p>
<div class="ulist none">
<ul class="none">
<li>
<p>1b1. System shows an error message that the index is invalid.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="use-case-data-encryption-code-encrypt-code"><a class="link" href="#use-case-data-encryption-code-encrypt-code">5.4. Use case: Data Encryption: <code>encrypt</code></a></h3>
<div class="paragraph">
<p>Assume that user has launched the application with the default settings (encryption toggled off).</p>
</div>
<div class="paragraph">
<p><strong>MSS</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>User requests to toggle on encryption.</p>
</li>
<li>
<p>User makes some changes to the patient data.</p>
</li>
<li>
<p>User requests to exit the application.</p>
</li>
<li>
<p>System encrypts patient data.</p>
</li>
<li>
<p>System removes unencrypted patient data.</p>
</li>
<li>
<p>System exits.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Extensions</strong></p>
</div>
<div class="ulist none">
<ul class="none">
<li>
<p>4a. System unable to encrypt the data.</p>
<div class="ulist none">
<ul class="none">
<li>
<p>4a1. System logs this anomaly and saves the unencrypted data.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div></div><div id="footer"><div class="container"><div id="footer-text">Last updated 2018-11-12 07:26:28 UTC</div></div></div></body></html>